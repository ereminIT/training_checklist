<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>100 дней: 100 отжиманий и 100 пресса</title>
    <style>
        :root {
            --primary: #4a6fa5;
            --secondary: #6b8cbc;
            --accent: #ff6b6b;
            --light: #f8f9fa;
            --dark: #343a40;
            --success: #51cf66;
            --warning: #fcc419;
            --border-radius: 10px;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f0f2f5;
            color: var(--dark);
            line-height: 1.6;
            padding: 20px;
            max-width: 800px;
            margin: 0 auto;
        }
        
        header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            border-radius: var(--border-radius);
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        
        h1 {
            font-size: 1.8rem;
            margin-bottom: 10px;
        }
        
        .subtitle {
            font-size: 1rem;
            opacity: 0.9;
        }
        
        .stats-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .stat-card {
            background: white;
            padding: 15px;
            border-radius: var(--border-radius);
            text-align: center;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }
        
        .stat-value {
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--primary);
        }
        
        .stat-label {
            font-size: 0.8rem;
            color: #666;
            margin-top: 5px;
        }
        
        .file-actions {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            justify-content: center;
            flex-wrap: wrap;
        }
        
        .file-actions button {
            background: var(--primary);
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 5px;
            cursor: pointer;
            transition: background 0.3s;
            flex: 1;
            min-width: 120px;
        }
        
        .file-actions button:hover {
            background: var(--secondary);
        }
        
        .day-card {
            background: white;
            border-radius: var(--border-radius);
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
            transition: transform 0.3s, box-shadow 0.3s;
            margin-bottom: 20px;
        }
        
        .day-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        
        .day-header {
            background: var(--primary);
            color: white;
            padding: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .day-number {
            font-weight: bold;
            font-size: 1.2rem;
        }
        
        .day-date {
            font-size: 0.9rem;
            opacity: 0.9;
        }
        
        .exercises {
            padding: 15px;
        }
        
        .exercise {
            display: flex;
            align-items: center;
            padding: 10px 0;
            border-bottom: 1px solid #eee;
        }
        
        .exercise:last-child {
            border-bottom: none;
        }
        
        .exercise-checkbox {
            margin-right: 12px;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            border: 2px solid #ddd;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
        }
        
        .exercise-checkbox.checked {
            background: var(--success);
            border-color: var(--success);
            color: white;
        }
        
        .exercise-info {
            flex: 1;
        }
        
        .exercise-name {
            font-weight: 500;
        }
        
        .exercise-details {
            font-size: 0.85rem;
            color: #666;
            margin-top: 3px;
        }
        
        .progress-container {
            margin-top: 30px;
            background: white;
            border-radius: var(--border-radius);
            padding: 20px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }
        
        .progress-bar {
            height: 10px;
            background: #e9ecef;
            border-radius: 5px;
            margin-top: 10px;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background: var(--success);
            border-radius: 5px;
            width: 0%;
            transition: width 0.5s;
        }
        
        .progress-text {
            display: flex;
            justify-content: space-between;
            margin-top: 5px;
            font-size: 0.9rem;
        }
        
        .motivation {
            text-align: center;
            margin-top: 20px;
            font-style: italic;
            color: var(--secondary);
        }
        
        .file-input {
            display: none;
        }
        
        .navigation {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
        }
        
        .nav-button {
            background: var(--primary);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            transition: background 0.3s;
        }
        
        .nav-button:hover {
            background: var(--secondary);
        }
        
        .nav-button:disabled {
            background: #ccc;
            cursor: not-allowed;
        }
        
        .current-day {
            font-weight: bold;
            font-size: 1.2rem;
            text-align: center;
            padding: 10px;
        }
        
        @media (max-width: 600px) {
            body {
                padding: 10px;
            }
            
            h1 {
                font-size: 1.5rem;
            }
            
            .stats-container {
                grid-template-columns: 1fr 1fr;
            }
            
            .file-actions {
                flex-direction: column;
            }
            
            .file-actions button {
                min-width: auto;
            }
            
            .navigation {
                flex-direction: column;
                gap: 10px;
            }
        }
    </style>
</head>
<body>
    <header>
        <h1>100 дней: 100 отжиманий и 100 пресса</h1>
        <p class="subtitle">Ежедневный челлендж для сильного тела</p>
    </header>
    
    <div class="stats-container">
        <div class="stat-card">
            <div class="stat-value" id="current-day">1</div>
            <div class="stat-label">Текущий день</div>
        </div>
        <div class="stat-card">
            <div class="stat-value" id="total-pushups">0</div>
            <div class="stat-label">Всего отжиманий</div>
        </div>
        <div class="stat-card">
            <div class="stat-value" id="total-abs">0</div>
            <div class="stat-label">Всего пресса</div>
        </div>
        <div class="stat-card">
            <div class="stat-value" id="completion-rate">0%</div>
            <div class="stat-label">Выполнено дней</div>
        </div>
    </div>
    
    <div class="file-actions">
        <button id="save-btn">Сохранить прогресс</button>
        <button id="load-btn">Загрузить прогресс</button>
        <input type="file" id="file-input" class="file-input" accept=".json">
    </div>
    
    <div class="navigation">
        <button id="prev-day" class="nav-button">Предыдущий день</button>
        <div class="current-day">День <span id="display-day">1</span></div>
        <button id="next-day" class="nav-button">Следующий день</button>
    </div>
    
    <div id="days-container">
        <!-- Содержимое дня будет добавлено через JavaScript -->
    </div>
    
    <div class="progress-container">
        <h3>Общий прогресс (100 дней)</h3>
        <div class="progress-bar">
            <div class="progress-fill" id="progress-fill"></div>
        </div>
        <div class="progress-text">
            <span>Выполнено: <span id="completed-days">0</span> из 100 дней</span>
            <span id="progress-percent">0%</span>
        </div>
    </div>
    
    <p class="motivation" id="motivation-text">Начни свой первый день прямо сейчас!</p>

    <script>
        // Данные для 100 дней - каждый день по 100 отжиманий и 100 пресса
        const challengeData = Array.from({length: 100}, (_, index) => {
            const dayNumber = index + 1;
            
            return {
                day: dayNumber,
                date: new Date(Date.now() + index * 24 * 60 * 60 * 1000),
                exercises: [
                    { 
                        name: "Отжимания", 
                        details: "100 повторений",
                        type: "pushups",
                        target: 100
                    },
                    { 
                        name: "Упражнения на пресс", 
                        details: "100 повторений (скручивания, планка, подъем ног)",
                        type: "abs", 
                        target: 100
                    }
                ]
            };
        });

        let currentDisplayDay = 1;
        let completedDays = JSON.parse(localStorage.getItem('completedDays')) || {};
        let currentStreak = parseInt(localStorage.getItem('currentStreak')) || 0;
        let lastActivityDate = localStorage.getItem('lastActivityDate');

        // Инициализация при загрузке страницы
        document.addEventListener('DOMContentLoaded', function() {
            checkStreak();
            updateCurrentDay();
            renderDay(currentDisplayDay);
            updateStats();
            updateProgress();
            
            // Обработчики для кнопок навигации
            document.getElementById('prev-day').addEventListener('click', function() {
                if (currentDisplayDay > 1) {
                    currentDisplayDay--;
                    renderDay(currentDisplayDay);
                    updateNavigation();
                }
            });
            
            document.getElementById('next-day').addEventListener('click', function() {
                if (currentDisplayDay < 100) {
                    currentDisplayDay++;
                    renderDay(currentDisplayDay);
                    updateNavigation();
                }
            });
            
            // Обработчики для работы с файлами
            document.getElementById('save-btn').addEventListener('click', saveProgressToFile);
            document.getElementById('load-btn').addEventListener('click', function() {
                document.getElementById('file-input').click();
            });
            
            document.getElementById('file-input').addEventListener('change', loadProgressFromFile);
        });

        // Проверка и обновление серии
        function checkStreak() {
            const today = new Date().toDateString();
            
            if (lastActivityDate) {
                const lastDate = new Date(lastActivityDate);
                const yesterday = new Date();
                yesterday.setDate(yesterday.getDate() - 1);
                
                if (lastDate.toDateString() === yesterday.toDateString()) {
                    // Продолжаем серию
                    currentStreak++;
                } else if (lastDate.toDateString() !== today) {
                    // Сбрасываем серию
                    currentStreak = 0;
                }
            }
            
            lastActivityDate = today;
            localStorage.setItem('lastActivityDate', lastActivityDate);
            localStorage.setItem('currentStreak', currentStreak);
        }

        // Определение текущего дня челленджа
        function updateCurrentDay() {
            const startDate = localStorage.getItem('challengeStartDate');
            let currentDay = 1;
            
            if (startDate) {
                const start = new Date(startDate);
                const today = new Date();
                const diffTime = today - start;
                const diffDays = Math.floor(diffTime / (1000 * 60 * 60 * 24)) + 1;
                
                if (diffDays > 0 && diffDays <= 100) {
                    currentDay = diffDays;
                } else if (diffDays > 100) {
                    currentDay = 100;
                }
            } else {
                // Первый запуск - устанавливаем дату начала
                localStorage.setItem('challengeStartDate', new Date().toISOString());
            }
            
            document.getElementById('current-day').textContent = currentDay;
            
            // Автоматически переходим к текущему дню
            if (currentDisplayDay !== currentDay) {
                currentDisplayDay = currentDay;
            }
        }

        // Функция сохранения прогресса в файл
        function saveProgressToFile() {
            const progressData = {
                completedDays: completedDays,
                currentStreak: currentStreak,
                lastActivityDate: lastActivityDate,
                challengeStartDate: localStorage.getItem('challengeStartDate'),
                timestamp: new Date().toISOString(),
                version: "1.0"
            };
            
            const blob = new Blob([JSON.stringify(progressData, null, 2)], { 
                type: 'application/json' 
            });
            
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `100days-progress-${new Date().toISOString().split('T')[0]}.json`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            alert('Прогресс сохранен в файл!');
        }
        
        // Функция загрузки прогресса из файла
        function loadProgressFromFile(event) {
            const file = event.target.files[0];
            if (!file) return;
            
            const reader = new FileReader();
            reader.onload = function(e) {
                try {
                    const progressData = JSON.parse(e.target.result);
                    
                    if (progressData.completedDays) {
                        completedDays = progressData.completedDays;
                        currentStreak = progressData.currentStreak || 0;
                        lastActivityDate = progressData.lastActivityDate;
                        
                        if (progressData.challengeStartDate) {
                            localStorage.setItem('challengeStartDate', progressData.challengeStartDate);
                        }
                        
                        localStorage.setItem('completedDays', JSON.stringify(completedDays));
                        localStorage.setItem('currentStreak', currentStreak);
                        localStorage.setItem('lastActivityDate', lastActivityDate);
                        
                        updateCurrentDay();
                        renderDay(currentDisplayDay);
                        updateStats();
                        updateProgress();
                        alert('Прогресс успешно загружен!');
                    } else {
                        alert('Формат файла не поддерживается');
                    }
                } catch (error) {
                    alert('Ошибка при чтении файла: ' + error.message);
                }
            };
            reader.readAsText(file);
            
            // Сброс input для возможности повторной загрузки того же файла
            event.target.value = '';
        }
        
        // Функция отрисовки дня
        function renderDay(dayNumber) {
            const daysContainer = document.getElementById('days-container');
            daysContainer.innerHTML = '';
            
            const dayData = challengeData[dayNumber - 1];
            document.getElementById('display-day').textContent = dayNumber;
            
            const dayCard = document.createElement('div');
            dayCard.className = 'day-card';
            
            const dayHeader = document.createElement('div');
            dayHeader.className = 'day-header';
            
            const dayNumberElement = document.createElement('div');
            dayNumberElement.className = 'day-number';
            dayNumberElement.textContent = `День ${dayNumber}`;
            
            const dayDate = document.createElement('div');
            dayDate.className = 'day-date';
            dayDate.textContent = dayData.date.toLocaleDateString('ru-RU');
            
            dayHeader.appendChild(dayNumberElement);
            dayHeader.appendChild(dayDate);
            
            const exercisesContainer = document.createElement('div');
            exercisesContainer.className = 'exercises';
            
            dayData.exercises.forEach((exercise, exerciseIndex) => {
                const exerciseElement = document.createElement('div');
                exerciseElement.className = 'exercise';
                
                const exerciseCheckbox = document.createElement('div');
                exerciseCheckbox.className = 'exercise-checkbox';
                const exerciseId = `day${dayNumber}-ex${exerciseIndex}`;
                
                if (completedDays[dayNumber] && completedDays[dayNumber][exerciseIndex]) {
                    exerciseCheckbox.classList.add('checked');
                    exerciseCheckbox.innerHTML = '✓';
                }
                
                exerciseCheckbox.addEventListener('click', function() {
                    this.classList.toggle('checked');
                    
                    if (!completedDays[dayNumber]) {
                        completedDays[dayNumber] = {};
                    }
                    
                    if (this.classList.contains('checked')) {
                        this.innerHTML = '✓';
                        completedDays[dayNumber][exerciseIndex] = true;
                        
                        // Обновляем серию при выполнении упражнения текущего дня
                        if (dayNumber === currentDisplayDay) {
                            checkStreak();
                        }
                    } else {
                        this.innerHTML = '';
                        delete completedDays[dayNumber][exerciseIndex];
                    }
                    
                    // Если день полностью выполнен, обновляем серию
                    if (isDayCompleted(dayNumber) && dayNumber === currentDisplayDay) {
                        currentStreak = Math.max(currentStreak, 1);
                        localStorage.setItem('currentStreak', currentStreak);
                    }
                    
                    localStorage.setItem('completedDays', JSON.stringify(completedDays));
                    updateStats();
                    updateProgress();
                });
                
                const exerciseInfo = document.createElement('div');
                exerciseInfo.className = 'exercise-info';
                
                const exerciseName = document.createElement('div');
                exerciseName.className = 'exercise-name';
                exerciseName.textContent = exercise.name;
                
                const exerciseDetails = document.createElement('div');
                exerciseDetails.className = 'exercise-details';
                exerciseDetails.textContent = exercise.details;
                
                exerciseInfo.appendChild(exerciseName);
                exerciseInfo.appendChild(exerciseDetails);
                
                exerciseElement.appendChild(exerciseCheckbox);
                exerciseElement.appendChild(exerciseInfo);
                
                exercisesContainer.appendChild(exerciseElement);
            });
            
            dayCard.appendChild(dayHeader);
            dayCard.appendChild(exercisesContainer);
            
            daysContainer.appendChild(dayCard);
            updateNavigation();
        }
        
        // Проверка, выполнен ли день полностью
        function isDayCompleted(dayNumber) {
            if (!completedDays[dayNumber]) return false;
            
            const dayExercises = challengeData[dayNumber - 1].exercises;
            return dayExercises.every((_, index) => completedDays[dayNumber][index]);
        }
        
        // Обновление навигации
        function updateNavigation() {
            document.getElementById('prev-day').disabled = currentDisplayDay === 1;
            document.getElementById('next-day').disabled = currentDisplayDay === 100;
        }
        
        // Функция обновления статистики
        function updateStats() {
            let totalPushups = 0;
            let totalAbs = 0;
            let completedCount = 0;
            
            for (let day = 1; day <= 100; day++) {
                if (completedDays[day]) {
                    const dayData = challengeData[day - 1];
                    const exercisesCompleted = Object.keys(completedDays[day]).length;
                    
                    if (exercisesCompleted > 0) {
                        completedCount++;
                        
                        // Считаем отжимания
                        if (completedDays[day][0]) {
                            totalPushups += dayData.exercises[0].target;
                        }
                        
                        // Считаем пресс
                        if (completedDays[day][1]) {
                            totalAbs += dayData.exercises[1].target;
                        }
                    }
                }
            }
            
            const completionRate = Math.round((completedCount / 100) * 100);
            
            document.getElementById('total-pushups').textContent = totalPushups;
            document.getElementById('total-abs').textContent = totalAbs;
            document.getElementById('completion-rate').textContent = `${completionRate}%`;
            document.getElementById('completed-days').textContent = completedCount;
            
            const progressPercent = completedCount;
            document.getElementById('progress-percent').textContent = `${progressPercent}%`;
            document.getElementById('progress-fill').style.width = `${progressPercent}%`;
            
            const motivationText = document.getElementById('motivation-text');
            if (completedCount === 0) {
                motivationText.textContent = "Начни свой первый день прямо сейчас! Каждый великий путь начинается с первого шага.";
            } else if (completedCount < 10) {
                motivationText.textContent = "Отличное начало! Привычка формируется 21 день - ты на правильном пути!";
            } else if (completedCount < 30) {
                motivationText.textContent = "Ты вырабатываешь привычку! Продолжай в том же духе!";
            } else if (completedCount < 60) {
                motivationText.textContent = "Потрясающе! Ты прошел треть пути! Не сбавляй темп!";
            } else if (completedCount < 90) {
                motivationText.textContent = "Фантастически! Больше половины пути пройдено! Осталось совсем немного!";
            } else if (completedCount < 100) {
                motivationText.textContent = "Почти у цели! Финальный рывок! Ты сможешь!";
            } else {
                motivationText.textContent = "ВЕЛИКОЛЕПНО! Ты завершил 100-дневный челлендж! Ты - настоящий чемпион!";
            }
            
            // Добавляем информацию о серии
            if (currentStreak > 0) {
                motivationText.textContent += ` Текущая серия: ${currentStreak} дней подряд!`;
            }
        }
        
        // Функция обновления прогресса
        function updateProgress() {
            // Обновление уже происходит в updateStats()
        }
    </script>
</body>
</html>
